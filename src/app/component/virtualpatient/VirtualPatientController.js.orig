define(function (require) {

    //TODO: make cards draggable
    //TODO: make hotspot from data

    var $ = require('jquery');
    var glm = require('glmatrix');
    var ViewController = require('controller/ViewController');
    var Animate = require('behaviour/Animate');
    var MultiTouchManager = require('behaviour/MultiTouchManager');
    var RotateTranslateScaleBehaviour = require('behaviour/RotateTranslateScaleBehaviour');

    var styles = [
        'virtual-patient.css'
    ];

    return ViewController.extend({

        elements: $(),
        multitouch: MultiTouchManager.getInstance(),
        collection: 'Patients',
        styles: styles,
        selector: '#virtual-patient-img',


        events: {
            'click #context': '_onContext',
            'click #background': '_onBackground',
            'click #flip-patient-button': '_flipPatient',
            'click #question-patient-button': '_questionPatient',
            'click #test-request-button': '_testRequests',
            'click #test-results-button': '_testResults',
            'click #patients-chart-button': '_showPatientsChart',
            'click #hide-chart-button': '_hidePatientsChart',

        },
        _onAfterRender: function () {
            this._addItems();
        },

        _addItems: function () {
            //---------------------------------------------
            var transformableResources = [
                //'<div style="background-color:#00f;width:100px;height:100px"></div>',
                $('#patients-chart-table').get(), // //jquery fetch things
                $('#speech-card').get(),
                $('#observation-card2').get(),
                $('#observation-card3').get(),
                $('#observation-card4').get()
            ]; // [a,b,c...

<<<<<<< HEAD
            var transforms = [
                //[glm.vec3.fromValues(-300, 0, 0), glm.vec3.fromValues(1.0, 1.0, 1), 0], //(translate,,) (scale,,)
                [glm.vec3.fromValues(300, 0, 0), glm.vec3.fromValues(1.0, 1.0, 1), 0],

                [glm.vec3.fromValues(0, 300, 0), glm.vec3.fromValues(1.0, 1.0, 1), 0],
                [glm.vec3.fromValues(100, 300, 0), glm.vec3.fromValues(1.0, 1.0, 1), 0],
                [glm.vec3.fromValues(500, 300, 0), glm.vec3.fromValues(1.0, 1.0, 1), 0],
                [glm.vec3.fromValues(-100, 300, 0), glm.vec3.fromValues(1.0, 1.0, 1), 0]
            ];
            var numItems  = transformableResources.length;
            for (var i =0; i<numItems; i++) {
                var element = $(transformableResources[i]);
                element.addClass("abs-center").appendTo(this.$el);
                element.css('transform', transforms[i]);

                var multiTouchElement = this.multitouch.addElement(element);
                var behaviour = new RotateTranslateScaleBehaviour(multiTouchElement);
                multiTouchElement.addBehaviour(behaviour);
                glm.vec3.copy(behaviour.translation, transforms[i][0]);
                glm.vec3.copy(behaviour.scale, transforms[i][1]);
                glm.vec3.copy(behaviour.rotation, transforms[i][2]);
                behaviour.needsUpdate();
                this.elements = this.elements.add(element);
            }


        },
=======
  return ViewController.extend({

    collection: 'Patients',
    styles: 'virtual-patient.css',
    selector: '#virtual-patient-img',
>>>>>>> develop

        _onReady: function () {
            this.listenTo(this.collection, 'add', this.render);
            //this.collection.add({name: 'New'});

<<<<<<< HEAD
            // draggables
            $('#patients-chart-table').draggable();
            //$('#virtual-patient-img-container').draggable();  //sample jquery method
            // $(".btn").draggable();

=======
    events: {
      'click #context': '_onContext',
      'click #background': '_onBackground',
      'click #flip-patient-button': '_flipPatient',
      'click #question-patient-button': '_questionPatient',
      'click #test-request-button': '_testRequests',
      'click #test-results-button': '_testResults',
      'click #patients-chart-button': '_showPatientsChart',
      'click #hide-chart-button': '_hidePatientsChart',
      'click #question-card': '_questionCard',
      'click #results-card1': '_showUrineAnalysisChart',
      'click #hide-chart-button2': '_hideUrineAnalysisChart'

    //   'hover #save-issue-button': '_saveIssue',
    },
    _onAfterRender: function () {
>>>>>>> develop

            $('#patients-chart-table').hide();
            $('#hide-chart-button').hide();

        },

<<<<<<< HEAD
        _flipPatient: function () {

            var virtual_patient_img = $('#virtual-patient-img');
            if (virtual_patient_img.attr("src") === "resources/images/androg.front.jpg") {
                virtual_patient_img.attr("src", "resources/images/androg.back.jpg");
            }
            else {
                virtual_patient_img.attr("src", "resources/images/androg.front.jpg");
            }

        },
        _showPatientsChart: function () {
            $('#patients-chart-table').show();
            $('#hide-chart-button').show();
            $('#patients-chart-button').hide();
=======
      // draggables
      $('#patients-chart-table').draggable();
      $('#virtual-patient-img-container').draggable();
      $('#speech-card1').draggable();
      $('#speech-card2').draggable();

      $('#observation-card1').draggable();
      $('#observation-card2').draggable();
      $('#observation-card3').draggable();

      $('#urine-analysis-results').draggable();

      $('#patients-chart-table').hide();
      $('#hide-chart-button').hide();
      $('.test-card').hide();
      $('.results-card').hide();
      $('.question-card').hide();
      $('.question-card').hide();
      $('#speech-card2').hide();
      $('#urine-analysis-results').hide();


>>>>>>> develop

        },

        _hidePatientsChart: function () {

            $('#patients-chart-table').hide();
            $('#hide-chart-button').hide();
            $('#patients-chart-button').show();

        },

        _questionPatient: function () {

            // TODO: explode options

<<<<<<< HEAD
        },
        _testRequests: function () {

            // TODO: explode options
=======

    _hidePatientsChart: function() {
>>>>>>> develop

        },
        _testResults: function () {

            // TODO: explode options

<<<<<<< HEAD
        }

    }); //end return function to send to viewController
});   //end require
=======
    _showUrineAnalysisChart: function() {

      $('#urine-analysis-results').show();
      $('#hide-chart-button').show();

    },

    _hideUrineAnalysisChart: function() {

      $('#urine-analysis-results').hide();
      $('#hide-chart-button2').hide();

    },



    _questionPatient: function () {

    // TODO: explode options
    // $('.question-card').show();
    if($('.question-card').is(":visible")){
        $('.question-card').hide();

    }else{
        $('.question-card').show();

    }


    },

    _questionCard: function(){
    $('#speech-card2').show();
},


    _testRequests: function () {

    // TODO: explode options

    // var menuItems = $('.virtual-patient-component-container .menu .menu-item');
    // var distance = 100;
    // var min = 3 * Math.PI / 4 ;
    // var max = 5 * Math.PI / 4;
    // Animate.scale($('.virtual-patient-component-container .title'));
    // for (var i = 0, len = menuItems.length; i < len; i++) {
    //     var menuItem = $(menuItems[i]);
    //     var angle = min + ((i / len) * (max - min));
    //     var width = Math.abs($(menuItem.children(0)).width() * 0.5 - $(menuItem.children(1)).width() * 0.5);
    //     Animate.scale(menuItem, {
    //         delay: i * 50,
    //         animate: {
    //             top: -distance * Math.sin(angle),
    //             left: distance * Math.cos(angle) - width
    //         }
    //     });
    // }

    if($('.test-card').is(":visible")){
        $('.test-card').hide();

    }else{
        $('.test-card').show();

    }




    },
    _testResults: function () {

    // TODO: explode options
    if($('.results-card').is(":visible")){
        $('.results-card').hide();

    }else{
        $('.results-card').show();

    }

    }

    // _saveIssue: function(){
    // // if($('.card').is(":hover")){
    // //     $('.card').hide();
    // //
    // // } // returns true or false
    //
    // }


  });
});
>>>>>>> develop
